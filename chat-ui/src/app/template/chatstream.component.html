<div class="chat-stream">
  <div class="stream-div">
    <div class="chat-message" *ngFor="let message of publishedMessage" [class.mine]="loggedinUserId === message.from">
      <div class="sender">
        <img class="dp" [src]="getAvatarUrl(message.fromUserName)" alt="avatar" (error)="$event.target.style.display='none'">
        <div class="chat-username">{{message.fromUserName}}</div>
      </div>
      <div class="message-body">{{message.message}}</div>
    </div>
  </div>

  <div class="message-form">
    <div class="typing-area">
      <div *ngIf="showTypingIndicator" class="typing-indicator">{{typingUser}} is typing...</div>
    </div>
    <form (ngSubmit)="sendMessage()">
      <textarea class="form-control" placeholder="Message..." autocomplete="off" name="message" rows="1"
                [(ngModel)]="message"
                (input)="onTypingInput(); adjustTextarea($event.target)"
                (keydown)="onTextareaKeydown($event)"></textarea>
    </form>
  </div>
</div>
